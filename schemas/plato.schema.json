{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://w3id.org/plato/schemas/plato.schema.json",
  "title": "PLATO — Place Attestation Ontology: Core Definitions",
  "description": "Shared object-type definitions for the PLATO data model. These definitions are composed by the place-centric and attestation-centric submission profiles.",

  "$defs": {

    "uri": {
      "type": "string",
      "format": "uri",
      "description": "A URI identifying an entity."
    },

    "isoOrYear": {
      "type": "string",
      "description": "ISO 8601 date/time or a signed integer year (e.g. '-0500' for 500 BCE).",
      "pattern": "^-?\\d{4}(-\\d{2}(-\\d{2}(T\\d{2}:\\d{2}(:\\d{2})?Z?)?)?)?$"
    },

    "precision": {
      "type": "string",
      "enum": ["day", "month", "year", "decade", "century", "era", "geological_period"],
      "description": "Precision/granularity of a temporal bound."
    },

    "unitFloat01": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "A value on the unit interval [0, 1]."
    },

    "languageTag": {
      "type": "string",
      "description": "BCP 47 language tag (e.g. 'en', 'zh-Hant', 'grc').",
      "pattern": "^[a-zA-Z]{2,8}(-[a-zA-Z0-9]{1,8})*$"
    },


    "qualification": {
      "type": "object",
      "description": "Qualification properties applicable to any facet node: epistemic uncertainty, ontological fuzziness, or relativity to an anchor entity. All properties are optional.",
      "properties": {
        "uncertainty": {
          "$ref": "#/$defs/unitFloat01",
          "description": "Epistemic uncertainty: 0.0 = completely unknown, 1.0 = no uncertainty."
        },
        "uncertaintyNote": {
          "type": "string",
          "description": "Explanation of the nature and source of epistemic uncertainty."
        },
        "fuzziness": {
          "$ref": "#/$defs/unitFloat01",
          "description": "Ontological fuzziness: 0.0 = crisp, 1.0 = maximally vague."
        },
        "fuzzinessNote": {
          "type": "string",
          "description": "Explanation of the nature of ontological fuzziness."
        },
        "relativeTo": {
          "$ref": "#/$defs/uri",
          "description": "URI of the anchor entity (Thing, Name, Period, etc.) to which this facet is defined relatively."
        },
        "relativeBearing": {
          "type": "number",
          "minimum": 0,
          "maximum": 360,
          "description": "Compass bearing from the anchor, in degrees."
        },
        "relativeDistance": {
          "type": "number",
          "minimum": 0,
          "description": "Distance from the anchor, in metres."
        },
        "relativeQualifier": {
          "$ref": "#/$defs/uri",
          "description": "URI of a controlled-vocabulary term describing the relative relationship (e.g. plato:Near, plato:Within, plato:UpstreamOf)."
        }
      },
      "additionalProperties": false
    },


    "name": {
      "type": "object",
      "description": "A toponym or appellation. Reusable across attestations and Things.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri", "description": "Stable URI for this Name node, if it has one." },
        "toponym": { "type": "string", "description": "The name string in its original script." },
        "language": { "$ref": "#/$defs/languageTag" },
        "script": {
          "type": "string",
          "description": "ISO 15924 script code (e.g. 'Latn', 'Arab', 'Grek')."
        },
        "nameType": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["toponym", "chrononym", "ethnonym", "demonym", "odonym", "hydronym"]
          },
          "description": "Type(s) of name: toponym (place), chrononym (period), ethnonym (people), demonym (inhabitants), odonym (street), hydronym (water body)."
        },
        "romanized": {
          "type": "string",
          "description": "Romanised/transliterated form if the toponym is in a non-Latin script."
        },
        "transliterationSystem": {
          "type": "string",
          "description": "The transliteration/romanization system used (e.g. 'Pinyin', 'BGN/PCGN', 'ISO 259')."
        },
        "ipa": {
          "type": "string",
          "description": "International Phonetic Alphabet representation of pronunciation."
        },
        "nameEmbedding": {
          "type": "string",
          "description": "Vector embedding for phonetic similarity search (format: implementation-specific, typically 256-dimensional vector)."
        },
        "qualification": { "$ref": "#/$defs/qualification" }
      },
      "required": ["toponym"],
      "additionalProperties": false
    },


    "geometry": {
      "type": "object",
      "description": "A spatial representation. Supports both WKT and GeoJSON formats, with precision metadata.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri" },
        "wkt": {
          "type": "string",
          "description": "Well-Known Text representation of the geometry."
        },
        "geojson": {
          "type": "object",
          "description": "GeoJSON Geometry object (Point, Polygon, LineString, etc.). Note: GeometryCollection not supported in some implementations.",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon"]
            },
            "coordinates": {}
          },
          "required": ["type", "coordinates"]
        },
        "reprPoint": {
          "type": "array",
          "description": "Representative point as [longitude, latitude]. Required for spatial indexing.",
          "items": { "type": "number" },
          "minItems": 2,
          "maxItems": 2
        },
        "bbox": {
          "type": "array",
          "description": "Bounding box: [min_lon, min_lat, max_lon, max_lat].",
          "items": { "type": "number" },
          "minItems": 4,
          "maxItems": 4
        },
        "hull": {
          "type": "string",
          "description": "Convex hull as WKT Polygon for quick spatial filtering."
        },
        "spatialPrecision": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["exact", "approximate", "uncertain", "historical_approximate"]
          },
          "description": "Spatial precision qualifier(s)."
        },
        "precisionKm": {
          "type": "array",
          "items": { "type": "number", "minimum": 0 },
          "description": "Uncertainty radius in kilometers."
        },
        "sourceCrs": {
          "type": "string",
          "description": "Original coordinate reference system (e.g. 'EPSG:4326')."
        },
        "qualification": { "$ref": "#/$defs/qualification" }
      },
      "additionalProperties": false
    },


    "timespan": {
      "type": "object",
      "description": "A temporal interval with explicit uncertainty bounds using a four-date model. Aligned with PeriodO best practices.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri" },
        "startEarliest": { "$ref": "#/$defs/isoOrYear", "description": "Earliest possible start date." },
        "startLatest": { "$ref": "#/$defs/isoOrYear", "description": "Latest possible start date." },
        "endEarliest": { "$ref": "#/$defs/isoOrYear", "description": "Earliest possible end date." },
        "endLatest": { "$ref": "#/$defs/isoOrYear", "description": "Latest possible end date." },
        "label": { "type": "string", "description": "Human-readable period name (e.g. 'Byzantine period')." },
        "startPrecision": { "$ref": "#/$defs/precision" },
        "endPrecision": { "$ref": "#/$defs/precision" },
        "precisionValue": { "type": "integer", "description": "Numeric precision in years." },
        "openStart": { "type": "boolean", "description": "True if start is deliberately unspecified (not just unknown)." },
        "openEnd": { "type": "boolean", "description": "True if end is deliberately unspecified (not just unknown)." },
        "periodoUri": { "$ref": "#/$defs/uri", "description": "Link to PeriodO period definition." },
        "edtfString": { "type": "string", "description": "Extended Date/Time Format representation." },
        "qualification": { "$ref": "#/$defs/qualification" }
      },
      "additionalProperties": false
    },


    "type": {
      "type": "object",
      "description": "A classification from a controlled vocabulary (typically AAT).",
      "properties": {
        "@id": { "$ref": "#/$defs/uri" },
        "identifier": {
          "$ref": "#/$defs/uri",
          "description": "URI in the controlled vocabulary (e.g. an AAT concept URI)."
        },
        "label": { "type": "string", "description": "Human-readable label." },
        "sourceLabel": {
          "type": "string",
          "description": "Original label as given in the contributing source, before vocabulary mapping."
        },
        "qualification": { "$ref": "#/$defs/qualification" }
      },
      "required": ["identifier", "label"],
      "additionalProperties": false
    },


    "source": {
      "type": "object",
      "description": "A citable document or authority that grounds an attestation.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri" },
        "title": { "type": "string" },
        "uri": { "$ref": "#/$defs/uri", "description": "Resolvable URI for the source." },
        "citation": { "type": "string", "description": "Bibliographic citation string." },
        "authorityType": {
          "type": "string",
          "enum": ["source", "dataset", "period", "relationType", "certaintyLevel"],
          "default": "source",
          "description": "Which Authority subclass this represents."
        }
      },
      "required": ["title"],
      "additionalProperties": false
    },


    "relation": {
      "type": "object",
      "description": "A Thing-to-Thing relation attested by an attestation (e.g. capital_of, successor_to).",
      "properties": {
        "relatesTo": {
          "$ref": "#/$defs/uri",
          "description": "URI of the target Thing."
        },
        "relationType": {
          "$ref": "#/$defs/uri",
          "description": "URI of the RelationType authority (e.g. a vocabulary term for 'capital_of')."
        },
        "relationLabel": {
          "type": "string",
          "description": "Human-readable label for the relation type."
        }
      },
      "required": ["relatesTo", "relationType"],
      "additionalProperties": false
    },


    "metaAttestation": {
      "type": "object",
      "description": "A reference to a target attestation and the nature of the commentary. Meta-types use SKOS concepts for vocabulary management.",
      "properties": {
        "targetAttestation": {
          "$ref": "#/$defs/uri",
          "description": "URI of the attestation being commented on."
        },
        "metaType": {
          "$ref": "#/$defs/uri",
          "description": "URI of a SKOS concept defining the nature of the meta-attestation (e.g. contradicts, supports, supersedes, refines, bundles)."
        },
        "metaTypeLabel": {
          "type": "string",
          "description": "Human-readable label for the meta-type (optional, for convenience)."
        }
      },
      "required": ["targetAttestation", "metaType"],
      "additionalProperties": false
    },


    "attestation": {
      "type": "object",
      "description": "A bundle of evidence linking a Thing to Names, Geometries, Timespans, Types, and Sources. The core unit of contributed knowledge in PLATO.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri", "description": "Stable URI for this attestation." },
        "about": {
          "$ref": "#/$defs/uri",
          "description": "URI of the Thing this attestation is about. Required in attestation-centric submissions; implicit in place-centric submissions where the attestation is nested under its Thing."
        },

        "names": {
          "type": "array",
          "items": { "$ref": "#/$defs/name" },
          "description": "Names attested."
        },
        "geometries": {
          "type": "array",
          "items": { "$ref": "#/$defs/geometry" },
          "description": "Geometries attested."
        },
        "timespans": {
          "type": "array",
          "items": { "$ref": "#/$defs/timespan" },
          "description": "Timespans attested."
        },
        "types": {
          "type": "array",
          "items": { "$ref": "#/$defs/type" },
          "description": "Type classifications attested."
        },

        "sources": {
          "type": "array",
          "items": { "$ref": "#/$defs/source" },
          "description": "Sources grounding this attestation."
        },

        "relations": {
          "type": "array",
          "items": { "$ref": "#/$defs/relation" },
          "description": "Thing-to-Thing relations asserted by this attestation."
        },

        "meta": {
          "$ref": "#/$defs/metaAttestation",
          "description": "If this attestation is a meta-attestation commenting on another."
        },

        "certainty": {
          "$ref": "#/$defs/unitFloat01",
          "description": "Overall certainty of this attestation, from 0.0 to 1.0."
        },
        "certaintyNote": {
          "type": "string",
          "description": "Explanation of the certainty assessment."
        },

        "sequence": {
          "type": "integer",
          "description": "Ordering index for attestations in routes or itineraries."
        },
        "notes": {
          "type": "string",
          "description": "Free-text notes providing additional context."
        },

        "contributor": {
          "oneOf": [
            { "$ref": "#/$defs/uri", "description": "URI reference to a Contributor." },
            { "$ref": "#/$defs/contributorObject" }
          ],
          "description": "The contributor who created this attestation (URI or inline object)."
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "When this attestation was created."
        },
        "modified": {
          "type": "string",
          "format": "date-time",
          "description": "When this attestation was last modified."
        }
      },
      "additionalProperties": false
    },


    "contributorObject": {
      "type": "object",
      "description": "A person, team, or automated process that creates attestations. ORCID required in WHG but optional in general ontology.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri", "description": "URI for this contributor." },
        "name": {
          "type": "string",
          "description": "Full name for persons, team name for groups, descriptive name for automated processes."
        },
        "orcid": {
          "type": "string",
          "pattern": "^https://orcid\\.org/\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]$",
          "description": "ORCID identifier in full URI format (https://orcid.org/0000-0000-0000-0000). Preferred format for persistent identification."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Contact email address."
        },
        "affiliation": {
          "oneOf": [
            { "$ref": "#/$defs/uri", "description": "URI reference to an Organization." },
            { "$ref": "#/$defs/organization" },
            { "type": "string", "description": "Free-text affiliation name." }
          ],
          "description": "Organizational affiliation (Organization object, URI, or free text)."
        },
        "role": {
          "type": "string",
          "enum": ["principal_investigator", "data_curator", "student_researcher", "automated_process", "external_contributor"],
          "description": "Role in the project or gazetteer."
        },
        "url": {
          "$ref": "#/$defs/uri",
          "description": "Website or profile URL for the contributor."
        },
        "identifier": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Additional persistent identifiers (ISNI, VIAF, Wikidata QID, etc.). Format: 'TYPE:value' (e.g., 'VIAF:12345678')."
        }
      },
      "required": ["name"],
      "additionalProperties": false
    },

    "organization": {
      "type": "object",
      "description": "An organization to which a Contributor is affiliated. Lightweight class for organizational references.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri", "description": "URI for this organization (preferably ROR, ISNI, or Wikidata)." },
        "name": {
          "type": "string",
          "description": "Name of the organization."
        },
        "identifier": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Persistent identifiers: ROR, ISNI, Wikidata QID, etc. Format: 'TYPE:value'."
        },
        "url": {
          "$ref": "#/$defs/uri",
          "description": "Organization website or homepage."
        }
      },
      "required": ["name"],
      "additionalProperties": false
    },


    "identityRelation": {
      "type": "object",
      "description": "An assertion that two Things refer to the same real-world entity. Distinct from scholarly Thing-to-Thing relations and from algorithm-generated SoftLinks.",
      "properties": {
        "@id": { "$ref": "#/$defs/uri" },
        "subject": {
          "$ref": "#/$defs/uri",
          "description": "URI of the first Thing."
        },
        "object": {
          "$ref": "#/$defs/uri",
          "description": "URI of the second Thing."
        },
        "identityType": {
          "type": "string",
          "enum": ["exactMatch", "closeMatch", "related"],
          "description": "Semantic strength of the identity assertion."
        },
        "certainty": {
          "$ref": "#/$defs/unitFloat01",
          "description": "Confidence in the identity assertion."
        },
        "basis": {
          "type": "string",
          "description": "Evidence or reasoning supporting this identity assertion."
        },
        "assertedBy": {
          "type": "string",
          "description": "Identifier or URI of the agent who made this assertion."
        },
        "assertedAt": {
          "type": "string",
          "format": "date-time"
        },
        "source": {
          "$ref": "#/$defs/source",
          "description": "Authority providing evidence for this assertion."
        },
        "promotedFrom": {
          "$ref": "#/$defs/uri",
          "description": "URI of the SoftLink from which this was promoted, if any."
        }
      },
      "required": ["subject", "object", "identityType"],
      "additionalProperties": false
    },


    "thing": {
      "type": "object",
      "description": "A stable, persistent identity — typically a place, but generalised to routes, networks, administrative units, and other historical entities.",
      "properties": {
        "@id": {
          "$ref": "#/$defs/uri",
          "description": "Stable URI for this Thing. For new Things not yet in the system, omit or use a local identifier."
        },
        "label": {
          "type": "string",
          "description": "A preferred display label (convenience field; canonical names come via attestations)."
        },
        "attestations": {
          "type": "array",
          "items": { "$ref": "#/$defs/attestation" },
          "description": "Attestations about this Thing (used in place-centric submissions)."
        },
        "identityRelations": {
          "type": "array",
          "items": { "$ref": "#/$defs/identityRelation" },
          "description": "Identity assertions linking this Thing to others."
        }
      },
      "required": ["label"],
      "additionalProperties": false
    }

  }
}
